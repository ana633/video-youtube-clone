{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import axios from\"axios\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import styled from\"styled-components\";import{loginFailure,loginStart,loginSuccess}from\"../redux/userSlice\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  height: calc(100vh - 56px);\\n  color: \",\";\\n\"])),function(_ref){var theme=_ref.theme;return theme.text;});var Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n  background-color: \",\";\\n  border: 1px solid \",\";\\n  padding: 20px 50px;\\n  gap: 10px;\\n\"])),function(_ref2){var theme=_ref2.theme;return theme.bgLighter;},function(_ref3){var theme=_ref3.theme;return theme.soft;});var Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 24px;\\n\"])));var SubTitle=styled.h2(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: 20px;\\n  font-weight: 300;\\n\"])));var Input=styled.input(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  border: 1px solid \",\";\\n  border-radius: 3px;\\n  padding: 10px;\\n  background-color: transparent;\\n  width: 100%;\\n  color: \",\";\\n\"])),function(_ref4){var theme=_ref4.theme;return theme.soft;},function(_ref5){var theme=_ref5.theme;return theme.text;});var Button=styled.button(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  border-radius: 3px;\\n  border: none;\\n  padding: 10px 20px;\\n  font-weight: 500;\\n  cursor: pointer;\\n  background-color: \",\";\\n  color: \",\";\\n\"])),function(_ref6){var theme=_ref6.theme;return theme.soft;},function(_ref7){var theme=_ref7.theme;return theme.textSoft;});var More=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-top: 10px;\\n  font-size: 12px;\\n  color: \",\";\\n\"])),function(_ref8){var theme=_ref8.theme;return theme.textSoft;});var Links=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  margin-left: 50px;\\n\"])));var Link=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  margin-left: 30px;\\n\"])));var SignIn=function SignIn(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showLoginError=_useState6[0],setShowLoginError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showSignupError=_useState8[0],setShowSignupError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var dispatch=useDispatch();var navigate=useNavigate();var handleLogin=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch(loginStart());_context.prev=2;_context.next=5;return axios.post(\"/api/auth/signin\",{name:name,password:password});case 5:res=_context.sent;dispatch(loginSuccess(res.data));navigate(\"/\");_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch(loginFailure());setShowLoginError(true);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleLogin(_x){return _ref9.apply(this,arguments);};}();var handleSignup=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var res,_res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"/api/auth/signup\",{name:name,password:password,email:email});case 4:res=_context2.sent;if(!res){_context2.next=17;break;}_context2.prev=6;_context2.next=9;return axios.post(\"/api/auth/signin\",{name:name,password:password});case 9:_res=_context2.sent;dispatch(loginSuccess(_res.data));navigate(\"/\");_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](6);dispatch(loginFailure());case 17:;_context2.next=23;break;case 20:_context2.prev=20;_context2.t1=_context2[\"catch\"](1);setShowSignupError(true);case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[1,20],[6,14]]);}));return function handleSignup(_x2){return _ref10.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"Sign in\"}),/*#__PURE__*/_jsx(SubTitle,{children:\"to continue to VideoTube\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"username\",onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{onClick:handleLogin,children:\"Sign in\"}),showLoginError&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',fontSize:'14px'},children:\"Incorrect Username/Password. Try Again.\"}),/*#__PURE__*/_jsx(Title,{children:\"or\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"username\",onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(Input,{placeholder:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),showSignupError&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',fontSize:'14px'},children:\"Username/Email appears to have been used already. Try a different one.\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSignup,children:\"Sign up\"})]}),/*#__PURE__*/_jsxs(More,{children:[\"English(USA)\",/*#__PURE__*/_jsxs(Links,{children:[/*#__PURE__*/_jsx(Link,{children:\"Help\"}),/*#__PURE__*/_jsx(Link,{children:\"Privacy\"}),/*#__PURE__*/_jsx(Link,{children:\"Terms\"})]})]})]});};export default SignIn;","map":{"version":3,"names":["axios","React","useState","useDispatch","styled","loginFailure","loginStart","loginSuccess","useNavigate","Container","div","theme","text","Wrapper","bgLighter","soft","Title","h1","SubTitle","h2","Input","input","Button","button","textSoft","More","Links","Link","span","SignIn","name","setName","email","setEmail","showLoginError","setShowLoginError","showSignupError","setShowSignupError","password","setPassword","dispatch","navigate","handleLogin","e","preventDefault","post","res","data","handleSignup","target","value","color","fontSize"],"sources":["/Users/anasaldana/Desktop/video-youtube-clone/client/src/pages/SignIn.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { loginFailure, loginStart, loginSuccess } from \"../redux/userSlice\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: calc(100vh - 56px);\n  color: ${({ theme }) => theme.text};\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  background-color: ${({ theme }) => theme.bgLighter};\n  border: 1px solid ${({ theme }) => theme.soft};\n  padding: 20px 50px;\n  gap: 10px;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n`;\n\nconst SubTitle = styled.h2`\n  font-size: 20px;\n  font-weight: 300;\n`;\n\nconst Input = styled.input`\n  border: 1px solid ${({ theme }) => theme.soft};\n  border-radius: 3px;\n  padding: 10px;\n  background-color: transparent;\n  width: 100%;\n  color: ${({ theme }) => theme.text};\n`;\n\nconst Button = styled.button`\n  border-radius: 3px;\n  border: none;\n  padding: 10px 20px;\n  font-weight: 500;\n  cursor: pointer;\n  background-color: ${({ theme }) => theme.soft};\n  color: ${({ theme }) => theme.textSoft};\n`;\n\nconst More = styled.div`\n  display: flex;\n  margin-top: 10px;\n  font-size: 12px;\n  color: ${({ theme }) => theme.textSoft};\n`;\n\nconst Links = styled.div`\n  margin-left: 50px;\n`;\n\nconst Link = styled.span`\n  margin-left: 30px;\n`;\n\nconst SignIn = () => {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [showLoginError, setShowLoginError] = useState(false);\n  const [showSignupError, setShowSignupError] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const dispatch = useDispatch();\n  const navigate = useNavigate()\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    dispatch(loginStart());\n    try {\n      const res = await axios.post(\"/api/auth/signin\", { name, password });\n      dispatch(loginSuccess(res.data));\n      navigate(\"/\")\n    } catch (err) {\n      dispatch(loginFailure());\n      setShowLoginError(true);\n    }\n  };\n\n  const handleSignup = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"/api/auth/signup\", {name, password, email});\n      if(res){\n        try {\n          const res = await axios.post(\"/api/auth/signin\", { name, password });\n          dispatch(loginSuccess(res.data));\n          navigate(\"/\")\n        } catch (err) {\n          dispatch(loginFailure());\n        }\n      };\n    }catch(error){\n      setShowSignupError(true);\n    }\n  };\n\n\n\n  return (\n    <Container>\n      <Wrapper>\n        <Title>Sign in</Title>\n        <SubTitle>to continue to VideoTube</SubTitle>\n        <Input\n          placeholder=\"username\"\n          onChange={(e) => setName(e.target.value)}\n        />\n        <Input\n          type=\"password\"\n          placeholder=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <Button onClick={handleLogin}>Sign in</Button>\n        {showLoginError && (\n          <p style={{color: 'red', fontSize:'14px'}}>Incorrect Username/Password. Try Again.</p>\n        )}\n        <Title>or</Title>\n        <Input\n          placeholder=\"username\"\n          onChange={(e) => setName(e.target.value)}\n        />\n        <Input placeholder=\"email\" onChange={(e) => setEmail(e.target.value)} />\n        <Input\n          type=\"password\"\n          placeholder=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        {showSignupError && (\n          <p style={{color: 'red', fontSize: '14px'}}>Username/Email appears to have been used already. Try a different one.</p>\n        )\n        }\n        <Button onClick={handleSignup}>Sign up</Button>\n      </Wrapper>\n      <More>\n        English(USA)\n        <Links>\n          <Link>Help</Link>\n          <Link>Privacy</Link>\n          <Link>Terms</Link>\n        </Links>\n      </More>\n    </Container>\n  );\n};\n\nexport default SignIn;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/anasaldana/Desktop/video-youtube-clone/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useEffect,useState}from\"react\";import styled from\"styled-components\";import{useSelector}from\"react-redux\";import Comment from\"./Comment\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var Button=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 5px;\\n  background-color: \",\";\\n  color: white;\\n  font-weight: 500;\\n  // margin-top: 60px;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  border-radius: 20px;\\n  opacity: 60%;\\n  gap: 5px;\\n  &:hover {\\n    background-color: \",\";\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.bg;},function(_ref2){var theme=_ref2.theme;return theme.soft;});var NewComment=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n\"])));var Avatar=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 50px;\\n  height: 50px;\\n  border-radius: 50%;\\n\"])));var Input=styled.input(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  border: none;\\n  border-bottom: 1px solid \",\";\\n  color: \",\";\\n  background-color: transparent;\\n  outline: none;\\n  padding: 5px;\\n  width: 70%;\\n\"])),function(_ref3){var theme=_ref3.theme;return theme.soft;},function(_ref4){var theme=_ref4.theme;return theme.text;});var Comments=function Comments(_ref5){var videoId=_ref5.videoId;var _useSelector=useSelector(function(state){return state.user;}),currentUser=_useSelector.currentUser;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showButton=_useState4[0],setShowButton=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];useEffect(function(){var fetchComments=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/comments/\".concat(videoId));case 3:res=_context.sent;setComments(res.data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchComments(){return _ref6.apply(this,arguments);};}();fetchComments();},[videoId]);var handleAddComment=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(input,videoId);_context2.prev=2;_context2.next=5;return axios.post(\"/api/comments\",{\"desc\":input,\"videoId\":videoId});case 5:window.location.reload();_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);case 10:setShowButton(false);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return function handleAddComment(_x){return _ref7.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(NewComment,{children:[/*#__PURE__*/_jsx(Avatar,{src:currentUser===null||currentUser===void 0?void 0:currentUser.img}),showButton?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Add a comment...\",onMouseEnter:function onMouseEnter(){return setShowButton(true);},onChange:function onChange(e){return setInput(e.target.value);}}),/*#__PURE__*/_jsx(Button,{onClick:handleAddComment,children:\"Comment\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setInput(\"\");setShowButton(false);},children:\"Cancel\"})]}):/*#__PURE__*/_jsx(Input,{placeholder:\"Add a comment...\",onMouseEnter:function onMouseEnter(){return setShowButton(true);}})]}),comments.map(function(comment){return/*#__PURE__*/_jsx(Comment,{comment:comment},comment._id);})]});};export default Comments;","map":{"version":3,"names":["React","useEffect","useState","styled","useSelector","Comment","axios","Container","div","Button","button","theme","bg","soft","NewComment","Avatar","img","Input","input","text","Comments","videoId","state","user","currentUser","comments","setComments","showButton","setShowButton","setInput","fetchComments","get","res","data","handleAddComment","e","preventDefault","console","log","post","window","location","reload","target","value","map","comment","_id"],"sources":["/Users/anasaldana/Desktop/video-youtube-clone/client/src/components/Comments.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector } from \"react-redux\";\nimport Comment from \"./Comment\";\nimport axios from \"axios\";\n\nconst Container = styled.div``;\n\nconst Button = styled.button`\n  padding: 5px;\n  background-color: ${({ theme }) => theme.bg};\n  color: white;\n  font-weight: 500;\n  // margin-top: 60px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  border-radius: 20px;\n  opacity: 60%;\n  gap: 5px;\n  &:hover {\n    background-color: ${({ theme }) => theme.soft};\n  }\n`;\n\nconst NewComment = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n`;\n\nconst Input = styled.input`\n  border: none;\n  border-bottom: 1px solid ${({ theme }) => theme.soft};\n  color: ${({ theme }) => theme.text};\n  background-color: transparent;\n  outline: none;\n  padding: 5px;\n  width: 70%;\n`;\n\nconst Comments = ({videoId}) => {\n  const { currentUser } = useSelector((state) => state.user);\n\n  const [comments, setComments] = useState([]);\n  const [showButton, setShowButton] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const res = await axios.get(`/api/comments/${videoId}`);\n        setComments(res.data);\n      } catch (err) {}\n    };\n    fetchComments();\n  }, [videoId]);\n\n  const handleAddComment = async (e) => {\n    e.preventDefault();\n    console.log(input,videoId);\n    try {\n      await axios.post(\"/api/comments\", {\"desc\":input, \"videoId\":videoId });\n      window.location.reload();\n    }catch(error){\n      \n    }\n    setShowButton(false);\n  };\n\n  return (\n    <Container>\n      <NewComment>\n        <Avatar src={currentUser?.img}/>\n        {\n          showButton ? (\n            <>\n            <Input \n            placeholder=\"Add a comment...\" \n            onMouseEnter={() =>setShowButton(true)}\n            onChange={(e) => setInput(e.target.value)}\n            />\n            <Button onClick={handleAddComment}>Comment</Button>\n            <Button onClick={() => {setInput(\"\"); setShowButton(false);}}>Cancel</Button>\n            </>\n          ) : (\n            <Input \n            placeholder=\"Add a comment...\" \n            onMouseEnter={() =>setShowButton(true)}\n            />\n            \n          )\n        }\n      </NewComment>\n      {\n        comments.map(comment => (\n          <Comment key={comment._id} comment={comment}/>\n        ))\n      }\n    </Container>\n  );\n};\n\nexport default Comments;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}